(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[289],{229:(e,t,s)=>{"use strict";s.d(t,{CU:()=>c,UA:()=>o,fF:()=>d,q_:()=>l});var r=s(5155),i=s(2115),n=s(5695),a=s(1541);function l(e){let{children:t,requiredRoles:s=[],fallbackPath:l="/login",requireAuth:d=!0}=e,{user:o,isAuthenticated:c,isLoading:u}=(0,a.A)(),m=(0,n.useRouter)(),h=(0,n.usePathname)();return((0,i.useEffect)(()=>{if(!u){if(d&&!c){let e="/login"!==h?"?returnUrl=".concat(encodeURIComponent(h)):"";m.push("".concat(l).concat(e));return}if(c&&o&&s.length>0&&!s.includes(o.role)){switch(o.role){case"ADMIN":m.push("/admin-portal");break;case"SUPERVISOR_TEACHER":case"TEACHER":m.push("/teacher-portal");break;case"STUDENT":m.push("/student-portal");break;default:m.push("/")}return}}},[c,u,o,s,m,h,l,d]),u)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):d&&!c||c&&o&&s.length>0&&!s.includes(o.role)?null:(0,r.jsx)(r.Fragment,{children:t})}function d(e){let{children:t}=e;return(0,r.jsx)(l,{requiredRoles:["STUDENT"],children:t})}function o(e){let{children:t}=e;return(0,r.jsx)(l,{requiredRoles:["TEACHER","SUPERVISOR_TEACHER"],children:t})}function c(e){let{children:t}=e,{isAuthenticated:s,isLoading:l,user:d}=(0,a.A)(),o=(0,n.useRouter)();return((0,i.useEffect)(()=>{if(!l&&s&&d&&d.role){let e=setTimeout(()=>{let e="STUDENT"===d.role?"/student-portal":"TEACHER"===d.role||"SUPERVISOR_TEACHER"===d.role?"/teacher-portal":"ADMIN"===d.role?"/admin-portal":"/";window.location.href=e},500);return()=>clearTimeout(e)}},[s,l,d,o]),l)?(0,r.jsxs)("div",{className:"min-h-screen flex items-center justify-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,r.jsx)("p",{className:"ml-2 text-gray-600",children:"Loading the dashboard..."})]}):s&&d&&d.role?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading the dashboard..."})]})}):(0,r.jsx)(r.Fragment,{children:t})}},1096:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(5155),i=s(2115),n=s(5695),a=s(6695),l=s(285),d=s(2523),o=s(5057),c=s(8539),u=s(1121),m=s(8950),h=s(4774),x=s(1541),p=s(229),f=s(6874),j=s.n(f),g=s(5169),v=s(9946);let b=(0,v.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),N=(0,v.A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);function y(){let{courseId:e}=(0,n.useParams)(),{user:t}=(0,x.A)(),[s,f]=(0,i.useState)({title:"",description:"",duration:"30 minutes",dueDate:"",isTimed:!0,attemptsAllowed:1,questions:[]}),[v,y]=(0,i.useState)(!1),[w,k]=(0,i.useState)(null),q=(e,t,s)=>{f(r=>({...r,questions:r.questions.map(r=>r.id===e?{...r,[t]:s}:r)}))},C=async t=>{if(t.preventDefault(),0===s.questions.length)return void k("Please add at least one question");if(!s.title.trim())return void k("Please enter a quiz title");if(!s.dueDate)return void k("Please set a due date");try{y(!0),k(null);let t=s.dueDate?new Date(s.dueDate+":00").toISOString():new Date(Date.now()+864e5).toISOString(),r={courseId:e,title:s.title,description:s.description,duration:s.duration,dueDate:t,isTimed:s.isTimed,attemptsAllowed:s.attemptsAllowed,questions:s.questions.map(e=>({id:e.id,question:e.question,options:e.options,correctAnswer:e.correctAnswer,points:e.points,explanation:e.explanation}))};console.log("Due date from form:",s.dueDate),console.log("Due date converted:",t),console.log("Sending quiz data:",r);let i=await fetch("".concat("https://vitriolacademy.com:76492","/quizzes"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken")),"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok){let e=await i.text();throw console.error("Quiz creation error response:",e),Error("Failed to create quiz: ".concat(i.status," ").concat(i.statusText," - ").concat(e))}window.location.href="/courses/".concat(e)}catch(e){console.error("Error creating quiz:",e),k(e instanceof Error?e.message:"Failed to create quiz")}finally{y(!1)}},E=(0,r.jsx)(h.Y,{userType:"teacher"});return(0,r.jsx)(p.q_,{requiredRoles:["TEACHER","SUPERVISOR_TEACHER"],children:(0,r.jsx)(m.CF,{drawerContent:E,children:(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-100 dark:from-slate-900 dark:to-slate-800",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(j(),{href:"/courses/".concat(e),children:(0,r.jsxs)(l.$,{variant:"outline",size:"sm",children:[(0,r.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Back to Course"]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Create Quiz"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Create a new quiz for your course"})]})]})}),(0,r.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[(0,r.jsxs)(a.Zp,{children:[(0,r.jsx)(a.aR,{children:(0,r.jsx)(a.ZB,{children:"Quiz Details"})}),(0,r.jsxs)(a.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"title",children:"Quiz Title *"}),(0,r.jsx)(d.p,{id:"title",value:s.title,onChange:e=>f(t=>({...t,title:e.target.value})),placeholder:"Enter quiz title",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"duration",children:"Duration"}),(0,r.jsx)(d.p,{id:"duration",value:s.duration,onChange:e=>f(t=>({...t,duration:e.target.value})),placeholder:"e.g., 60 minutes",required:!0})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"dueDate",children:"Due Date *"}),(0,r.jsx)(d.p,{id:"dueDate",type:"datetime-local",value:s.dueDate,onChange:e=>f(t=>({...t,dueDate:e.target.value})),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"attemptsAllowed",children:"Attempts Allowed"}),(0,r.jsx)(d.p,{id:"attemptsAllowed",type:"number",value:s.attemptsAllowed,onChange:e=>f(t=>({...t,attemptsAllowed:parseInt(e.target.value)||1})),min:"1",max:"10"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(u.S,{id:"isTimed",checked:s.isTimed,onCheckedChange:e=>f(t=>({...t,isTimed:e}))}),(0,r.jsx)(o.J,{htmlFor:"isTimed",children:"Timed Quiz"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"description",children:"Description"}),(0,r.jsx)(c.T,{id:"description",value:s.description,onChange:e=>f(t=>({...t,description:e.target.value})),placeholder:"Enter quiz description",rows:3})]})]})]}),(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)(a.ZB,{children:["Questions (",s.questions.length,")"]}),(0,r.jsxs)(l.$,{type:"button",onClick:()=>{let e={id:Date.now().toString(),question:"",options:["","","",""],correctAnswer:0,points:10,explanation:""};f(t=>({...t,questions:[...t.questions,e]}))},variant:"outline",size:"sm",children:[(0,r.jsx)(b,{className:"h-4 w-4 mr-2"}),"Add Question"]})]}),(0,r.jsx)(a.Wu,{children:0===s.questions.length?(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,r.jsx)("p",{children:"No questions added yet."}),(0,r.jsx)("p",{className:"text-sm",children:'Click "Add Question" to get started.'})]}):(0,r.jsx)("div",{className:"space-y-6",children:s.questions.map((e,t)=>(0,r.jsxs)(a.Zp,{className:"border-2",children:[(0,r.jsx)(a.aR,{className:"pb-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h3",{className:"font-semibold",children:["Question ",t+1]}),(0,r.jsx)(l.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>{var t;return t=e.id,void f(e=>({...e,questions:e.questions.filter(e=>e.id!==t)}))},className:"text-red-500 hover:text-red-700",children:(0,r.jsx)(N,{className:"h-4 w-4"})})]})}),(0,r.jsxs)(a.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{children:"Question Text *"}),(0,r.jsx)(c.T,{value:e.question,onChange:t=>q(e.id,"question",t.target.value),placeholder:"Enter your question",rows:2,required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{children:"Options"}),(0,r.jsx)("div",{className:"space-y-2",children:e.options.map((t,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"radio",name:"correct-".concat(e.id),checked:e.correctAnswer===s,onChange:()=>q(e.id,"correctAnswer",s),className:"mt-1"}),(0,r.jsx)(d.p,{value:t,onChange:t=>{var r,i;return r=e.id,i=t.target.value,void f(e=>({...e,questions:e.questions.map(e=>{if(e.id===r){let t=[...e.options];return t[s]=i,{...e,options:t}}return e})}))},placeholder:"Option ".concat(s+1),required:!0})]},s))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"points-".concat(e.id),children:"Points"}),(0,r.jsx)(d.p,{id:"points-".concat(e.id),type:"number",value:e.points,onChange:t=>q(e.id,"points",parseInt(t.target.value)||10),min:"1",max:"100"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"explanation-".concat(e.id),children:"Explanation (Optional)"}),(0,r.jsx)(c.T,{id:"explanation-".concat(e.id),value:e.explanation,onChange:t=>q(e.id,"explanation",t.target.value),placeholder:"Explain why this answer is correct...",rows:2})]})]})]},e.id))})})]}),(0,r.jsxs)(a.Zp,{children:[(0,r.jsx)(a.aR,{children:(0,r.jsx)(a.ZB,{children:"Summary"})}),(0,r.jsxs)(a.Wu,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Questions:"}),(0,r.jsx)("p",{className:"font-semibold",children:s.questions.length})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Total Points:"}),(0,r.jsx)("p",{className:"font-semibold",children:s.questions.reduce((e,t)=>e+t.points,0)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Duration:"}),(0,r.jsx)("p",{className:"font-semibold",children:s.duration})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Due Date:"}),(0,r.jsx)("p",{className:"font-semibold",children:s.dueDate?new Date(s.dueDate).toLocaleDateString():"Not set"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm mt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Timed:"}),(0,r.jsx)("p",{className:"font-semibold",children:s.isTimed?"Yes":"No"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Attempts:"}),(0,r.jsx)("p",{className:"font-semibold",children:s.attemptsAllowed})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),(0,r.jsx)("p",{className:"font-semibold text-green-600",children:"Ready to Create"})]})]})]})]}),w&&(0,r.jsx)(a.Zp,{className:"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/20",children:(0,r.jsx)(a.Wu,{className:"pt-6",children:(0,r.jsx)("p",{className:"text-red-600 dark:text-red-400",children:w})})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)(j(),{href:"/courses/".concat(e),children:(0,r.jsx)(l.$,{type:"button",variant:"outline",children:"Cancel"})}),(0,r.jsx)(l.$,{type:"submit",disabled:v||0===s.questions.length,children:v?"Creating Quiz...":"Create Quiz"})]})]})]})})})})}},1121:(e,t,s)=>{"use strict";s.d(t,{S:()=>R});var r=s(5155),i=s(2115),n=s(6101),a=s(6081),l=s(5185),d=s(5845),o=s(5503),c=s(1275),u=s(8905),m=s(3655),h="Checkbox",[x,p]=(0,a.A)(h),[f,j]=x(h);function g(e){let{__scopeCheckbox:t,checked:s,children:n,defaultChecked:a,disabled:l,form:o,name:c,onCheckedChange:u,required:m,value:x="on",internal_do_not_use_render:p}=e,[j,g]=(0,d.i)({prop:s,defaultProp:null!=a&&a,onChange:u,caller:h}),[v,b]=i.useState(null),[N,y]=i.useState(null),w=i.useRef(!1),k=!v||!!o||!!v.closest("form"),q={checked:j,disabled:l,setChecked:g,control:v,setControl:b,name:c,form:o,value:x,hasConsumerStoppedPropagationRef:w,required:m,defaultChecked:!C(a)&&a,isFormControl:k,bubbleInput:N,setBubbleInput:y};return(0,r.jsx)(f,{scope:t,...q,children:"function"==typeof p?p(q):n})}var v="CheckboxTrigger",b=i.forwardRef((e,t)=>{let{__scopeCheckbox:s,onKeyDown:a,onClick:d,...o}=e,{control:c,value:u,disabled:h,checked:x,required:p,setControl:f,setChecked:g,hasConsumerStoppedPropagationRef:b,isFormControl:N,bubbleInput:y}=j(v,s),w=(0,n.s)(t,f),k=i.useRef(x);return i.useEffect(()=>{let e=null==c?void 0:c.form;if(e){let t=()=>g(k.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[c,g]),(0,r.jsx)(m.sG.button,{type:"button",role:"checkbox","aria-checked":C(x)?"mixed":x,"aria-required":p,"data-state":E(x),"data-disabled":h?"":void 0,disabled:h,value:u,...o,ref:w,onKeyDown:(0,l.m)(a,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,l.m)(d,e=>{g(e=>!!C(e)||!e),y&&N&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})})});b.displayName=v;var N=i.forwardRef((e,t)=>{let{__scopeCheckbox:s,name:i,checked:n,defaultChecked:a,required:l,disabled:d,value:o,onCheckedChange:c,form:u,...m}=e;return(0,r.jsx)(g,{__scopeCheckbox:s,checked:n,defaultChecked:a,disabled:d,required:l,onCheckedChange:c,name:i,form:u,value:o,internal_do_not_use_render:e=>{let{isFormControl:i}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b,{...m,ref:t,__scopeCheckbox:s}),i&&(0,r.jsx)(q,{__scopeCheckbox:s})]})}})});N.displayName=h;var y="CheckboxIndicator",w=i.forwardRef((e,t)=>{let{__scopeCheckbox:s,forceMount:i,...n}=e,a=j(y,s);return(0,r.jsx)(u.C,{present:i||C(a.checked)||!0===a.checked,children:(0,r.jsx)(m.sG.span,{"data-state":E(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});w.displayName=y;var k="CheckboxBubbleInput",q=i.forwardRef((e,t)=>{let{__scopeCheckbox:s,...a}=e,{control:l,hasConsumerStoppedPropagationRef:d,checked:u,defaultChecked:h,required:x,disabled:p,name:f,value:g,form:v,bubbleInput:b,setBubbleInput:N}=j(k,s),y=(0,n.s)(t,N),w=(0,o.Z)(u),q=(0,c.X)(l);i.useEffect(()=>{if(!b)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!d.current;if(w!==u&&e){let s=new Event("click",{bubbles:t});b.indeterminate=C(u),e.call(b,!C(u)&&u),b.dispatchEvent(s)}},[b,w,u,d]);let E=i.useRef(!C(u)&&u);return(0,r.jsx)(m.sG.input,{type:"checkbox","aria-hidden":!0,defaultChecked:null!=h?h:E.current,required:x,disabled:p,name:f,value:g,form:v,...a,tabIndex:-1,ref:y,style:{...a.style,...q,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function C(e){return"indeterminate"===e}function E(e){return C(e)?"indeterminate":e?"checked":"unchecked"}q.displayName=k;let T=(0,s(9946).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var A=s(9434);let R=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)(N,{ref:t,className:(0,A.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...i,children:(0,r.jsx)(w,{className:(0,A.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(T,{className:"h-4 w-4"})})})});R.displayName=N.displayName},2523:(e,t,s)=>{"use strict";s.d(t,{p:()=>a});var r=s(5155),i=s(2115),n=s(9434);let a=i.forwardRef((e,t)=>{let{className:s,type:i,...a}=e;return(0,r.jsx)("input",{type:i,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...a})});a.displayName="Input"},5057:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var r=s(5155),i=s(2115),n=s(968),a=s(2085),l=s(9434);let d=(0,a.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)(n.b,{ref:t,className:(0,l.cn)(d(),s),...i})});o.displayName=n.b.displayName},5169:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6661:(e,t,s)=>{Promise.resolve().then(s.bind(s,1096))},8539:(e,t,s)=>{"use strict";s.d(t,{T:()=>a});var r=s(5155),i=s(2115),n=s(9434);let a=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});a.displayName="Textarea"}},e=>{e.O(0,[874,794,352,423,541,828,441,964,358],()=>e(e.s=6661)),_N_E=e.O()}]);