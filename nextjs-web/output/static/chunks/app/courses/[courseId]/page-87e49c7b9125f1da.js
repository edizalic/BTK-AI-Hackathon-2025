(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[816],{4145:(e,s,t)=>{Promise.resolve().then(t.bind(t,8906))},8906:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>k});var a=t(5155),r=t(2115),l=t(5695),n=t(8950),i=t(4774),d=t(6695),c=t(285),o=t(6126),x=t(4247),u=t(1541),m=t(9434),h=t(6874),g=t.n(h),p=t(6474),j=t(3052),f=t(9076);let N=e=>{let{material:s}=e;return(0,a.jsx)(d.Zp,{className:"hover:shadow-md transition-all duration-200",children:(0,a.jsx)(d.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:{syllabus:"\uD83D\uDCCB",slides:"\uD83D\uDCCA",reading:"\uD83D\uDCDA",handout:"\uD83D\uDCC4",reference:"\uD83D\uDD17"}[s.type]||"\uD83D\uDCC4"}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-foreground truncate",children:s.title}),s.description&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:s.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{children:["Uploaded: ",new Date(s.uploadDate).toLocaleDateString()]}),(0,a.jsx)("span",{children:s.fileSize||s.size})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ml-2",children:[(0,a.jsx)("span",{className:(0,m.cn)("px-2 py-1 rounded text-xs font-medium capitalize",{syllabus:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",slides:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",reading:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",handout:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400",reference:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}[s.type]||"bg-gray-100 text-gray-800"),children:s.type}),(0,a.jsx)(c.$,{variant:"outline",size:"sm",children:"Download"})]})]})})]})})})},b=e=>{let{assignment:s}=e,t=new Date(s.dueDate)<new Date,r=Math.ceil((new Date(s.dueDate).getTime()-new Date().getTime())/864e5);return(0,a.jsx)(d.Zp,{className:(0,m.cn)("hover:shadow-md transition-all duration-200",t?"border-red-200 dark:border-red-800":"border-border"),children:(0,a.jsx)(d.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-foreground",children:s.title}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Due: ",new Date(s.dueDate).toLocaleDateString(),t?(0,a.jsx)("span",{className:"text-red-600 ml-2",children:"• Overdue"}):r<=3?(0,a.jsx)("span",{className:"text-orange-600 ml-2",children:"• Due Soon"}):null]})]}),(0,a.jsx)(c.$,{variant:"assigned"===s.status?"default":"outline",size:"sm",children:"assigned"===s.status?"Submit":"View"})]})})})},y=e=>{let{quiz:s,courseId:t}=e,{user:r}=(0,u.A)(),l=new Date(s.dueDate)<new Date,n=Math.ceil((new Date(s.dueDate).getTime()-new Date().getTime())/864e5),i=s.attemptsAllowed-s.attemptsUsed,o=(null==r?void 0:r.role)==="TEACHER"||(null==r?void 0:r.role)==="SUPERVISOR_TEACHER"||(null==r?void 0:r.role)==="ADMIN",x=async()=>{if(confirm("Are you sure you want to delete this quiz? This action cannot be undone."))try{let e=await fetch("".concat("https://vitriolacademy.com:76492","/quizzes/").concat(s.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken")),"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to delete quiz: ".concat(e.status));window.location.reload()}catch(e){console.error("Error deleting quiz:",e),alert("Failed to delete quiz. Please try again.")}};return(0,a.jsx)(d.Zp,{className:(0,m.cn)("hover:shadow-md transition-all duration-200",l?"border-red-200 dark:border-red-800":"border-border"),children:(0,a.jsx)(d.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDCDD"}),(0,a.jsx)("h3",{className:"font-semibold text-foreground",children:s.title}),l&&(0,a.jsx)("span",{className:"text-red-600 text-sm font-medium",children:"• Overdue"})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:s.description}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:flex sm:items-center sm:space-x-4 text-xs text-muted-foreground gap-1",children:[(0,a.jsxs)("span",{children:["⏱️ ",s.duration]}),(0,a.jsxs)("span",{children:["\uD83D\uDCCA ",s.totalQuestions," questions"]}),(0,a.jsxs)("span",{children:["\uD83C\uDFAF ",s.maxPoints," points"]}),(0,a.jsxs)("span",{children:["\uD83D\uDD04 ",i," attempts left"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Due: ",new Date(s.dueDate).toLocaleDateString()]}),!l&&n<=3&&(0,a.jsx)("span",{className:"text-orange-600 text-xs font-medium",children:"• Due Soon"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center sm:items-end space-y-2 sm:ml-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[o&&(0,a.jsx)(c.$,{variant:"destructive",size:"sm",onClick:x,className:"w-full sm:w-auto",children:"Delete"}),!l&&i>0?(0,a.jsx)(g(),{href:"/courses/".concat(t,"/solve-quiz/").concat(s.id),children:(0,a.jsx)(c.$,{variant:"default",size:"sm",className:"w-full sm:w-auto",children:"Start Quiz"})}):(0,a.jsx)(c.$,{variant:"outline",size:"sm",disabled:!0,className:"w-full sm:w-auto",children:l?"Expired":0===i?"No Attempts Left":"Start Quiz"})]}),s.isTimed&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"⏰ Timed"})]})]})})})},v=e=>{let{grade:s}=e;return(0,a.jsx)(d.Zp,{className:"hover:shadow-md transition-all duration-200",children:(0,a.jsx)(d.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-foreground",children:s.assignmentTitle}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Graded: ",new Date(s.gradedDate).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-semibold text-lg",children:[s.score,"/",s.maxPoints]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:s.letterGrade})]})]})})})},w=e=>{let{announcement:s}=e,t="high"===s.priority||s.isImportant;return(0,a.jsx)(d.Zp,{className:(0,m.cn)("hover:shadow-md transition-all duration-200",t?"border-red-200 dark:border-red-800":"border-border"),children:(0,a.jsxs)(d.Wu,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[t&&(0,a.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),(0,a.jsx)("h3",{className:"font-semibold text-foreground",children:s.title})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[s.priority&&(0,a.jsx)("span",{className:(0,m.cn)("px-2 py-1 rounded text-xs font-medium capitalize",(e=>{switch(e){case"high":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"low":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}})(s.priority)),children:s.priority}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:new Date(s.date).toLocaleDateString()})]})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:s.content}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["— ",s.author]})]})})};function k(e){let{params:s}=e,t=(0,l.useRouter)(),{courseId:h}=(0,r.use)(s),{user:k}=(0,u.A)(),D=(null==k?void 0:k.role)==="TEACHER"||(null==k?void 0:k.role)==="SUPERVISOR_TEACHER",z=(null==k?void 0:k.role)==="SUPERVISOR_TEACHER",C={name:(null==k?void 0:k.profile)?"".concat(k.profile.firstName," ").concat(k.profile.lastName):"Loading...",email:(null==k?void 0:k.email)||""},{course:A,loading:S,error:E,studyPlan:T,studyPlanLoading:q}=(e=>{let[s,t]=(0,r.useState)(null),[a,l]=(0,r.useState)(!0),[n,i]=(0,r.useState)(null),[d,c]=(0,r.useState)(null),[o,m]=(0,r.useState)(!1),{user:h}=(0,u.A)();return(0,r.useEffect)(()=>{let s=async()=>{try{var s,a,r,n,d,o,u,m,g,p,j,f;l(!0),i(null);let N=await x.nC.courses.getCourseById(e);if(!N)throw Error("Course not found: ".concat(e));let b=N.data||N;if(!b||!b.id)throw Error("Course data not found: ".concat(e));console.log("\uD83D\uDCE5 Course Response:",N);let y=0;try{let s=await fetch("".concat("https://vitriolacademy.com:76492","/enrollment/courses/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken")),"Content-Type":"application/json"}});if(s.ok){let e=await s.json(),t=(null==(f=e.data)?void 0:f.data)||e.data||[];y=Array.isArray(t)?t.length:0}}catch(e){console.warn("Could not fetch enrollment count:",e)}let v=b.quizzes||[];if(console.log("\uD83D\uDCE5 Quiz Response:",v),v.length>0&&v.some(e=>"cmdzqy2h30001qph5gs7d2kzt"===e.id))try{let s=await x.nC.quizzes.getCourseQuizzes(e,{availableOnly:!0});s.quizzes&&s.quizzes.length>0&&(console.log("\uD83D\uDCE5 Alternative Quiz Response:",s.quizzes),v=s.quizzes)}catch(e){console.warn("Alternative quiz API failed:",e)}if((null==h?void 0:h.role)==="STUDENT"&&v.length>0)try{v=await Promise.all(v.map(async e=>{try{let s=((await x.nC.quizzes.getMyQuizAttempts(e.id)).attempts||[]).length;return{...e,attemptsUsed:s,attemptsRemaining:e.attemptsAllowed-s}}catch(s){return console.warn("Could not fetch attempts for quiz ".concat(e.id,":"),s),{...e,attemptsUsed:0,attemptsRemaining:e.attemptsAllowed||1}}}))}catch(e){console.warn("Could not fetch quiz attempts:",e)}let w={id:b.id||"",code:b.code||"",name:b.name||"",description:b.description||"",credits:b.credits||0,schedule:{days:b.scheduleDays||[],startTime:b.startTime||"",endTime:b.endTime||"",location:b.location||"",building:b.building||"",room:b.room||""},instructor:{id:(null==(s=b.instructor)?void 0:s.id)||"",name:(null==(a=b.instructor)?void 0:a.profile)?"".concat(b.instructor.profile.firstName||""," ").concat(b.instructor.profile.lastName||"").trim():(null==(r=b.instructor)?void 0:r.email)||"Unknown Instructor",email:(null==(n=b.instructor)?void 0:n.email)||"",office:(null==(o=b.instructor)||null==(d=o.profile)?void 0:d.officeLocation)||void 0,officeHours:(null==(m=b.instructor)||null==(u=m.profile)?void 0:u.officeHours)||void 0},semester:b.semester||"",year:b.year||new Date().getFullYear(),capacity:b.capacity||30,enrolled:y,status:(null==(g=b.status)?void 0:g.toLowerCase())||"active",category:b.category||"",department:(null==(p=b.department)?void 0:p.name)||"General",level:(null==(j=b.level)?void 0:j.toLowerCase())||"beginner",startDate:b.startDate||"",endDate:b.endDate||"",enrollmentDeadline:b.enrollmentDeadline||void 0,materials:b.courseMaterials||[],announcements:b.announcements||[],upcomingDeadlines:b.assignments||[],recentGrades:[],upcomingSessions:[],openQuizzes:v,progress:{completed:0,total:0,currentGrade:0,attendance:0}};if(t(w),b.studyPlan&&Array.isArray(b.studyPlan)){let e={id:b.id,courseId:b.id,weeks:b.studyPlan.map((e,s)=>({week:(s+1).toString(),description:e.description||e.content||""})),createdById:b.createdById,createdBy:b.instructor,createdAt:b.createdAt,updatedAt:b.updatedAt};c(e)}else c(null)}catch(t){console.error("Error loading course details:",t);let s=t instanceof Error?t.message:"Failed to load course details";i("".concat(s," (Course ID: ").concat(e,")"))}finally{l(!1)}};e&&s()},[e,null==h?void 0:h.role]),{course:s,loading:a,error:n,studyPlan:d,studyPlanLoading:a}})(h),[R,$]=(0,r.useState)(new Set),[Z,P]=(0,r.useState)(!1),[I,W]=(0,r.useState)(!1),[B,F]=(0,r.useState)([]),[L,Q]=(0,r.useState)(!1),G=async()=>{try{Q(!0);let e=await fetch("".concat("https://vitriolacademy.com:76492","/courses/").concat(h,"/study-plan"),{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken")),"Content-Type":"application/json"},body:JSON.stringify({weeks:B})});if(!e.ok)throw Error("Failed to save study plan: ".concat(e.status," ").concat(e.statusText));let s=await e.json();console.log("Study plan saved successfully:",s),window.location.reload()}catch(e){console.error("Error saving study plan:",e),alert("Failed to save study plan. Please try again.")}finally{Q(!1)}},M=(0,a.jsx)(i.Y,{userType:D?"teacher":"student",userData:C});return S?(0,a.jsx)(n.CF,{drawerContent:M,children:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading course details..."})]})})}):E||!A?(0,a.jsx)(n.CF,{drawerContent:M,children:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-2",children:"Course Not Found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:E||"The requested course could not be found."}),(0,a.jsx)(c.$,{onClick:()=>t.push("/courses"),children:"Back to Courses"})]})})}):(0,a.jsxs)(n.CF,{drawerContent:M,children:[(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-100 dark:from-slate-900 dark:to-slate-800",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[(0,a.jsx)("div",{children:(0,a.jsx)(g(),{href:"/courses",children:(0,a.jsx)(c.$,{variant:"outline",size:"sm",children:"← Back to Courses"})})}),(0,a.jsx)(d.Zp,{className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white border-0",children:(0,a.jsx)(d.Wu,{className:"p-8",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row items-start justify-between space-y-4 lg:space-y-0",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:A.name}),(0,a.jsx)("span",{className:(0,m.cn)("px-3 py-1 rounded-full text-xs font-semibold capitalize",(e=>{switch(e){case"active":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"completed":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"upcoming":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}})(A.status)),children:A.status})]}),(0,a.jsxs)("p",{className:"text-blue-100 text-lg mb-2",children:[A.code," • ",A.credits," Credits"]}),(0,a.jsx)("p",{className:"text-blue-100",children:A.description})]}),(0,a.jsx)("div",{className:"text-center lg:text-right",children:A.progress&&A.progress.total>0?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-blue-100 text-sm",children:"Current Grade"}),(0,a.jsxs)("p",{className:"text-white font-bold text-2xl",children:[A.progress.currentGrade,"%"]}),(0,a.jsxs)("p",{className:"text-blue-100 text-sm",children:["Attendance: ",A.progress.attendance,"%"]})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-blue-100 text-sm",children:"Course Status"}),(0,a.jsx)("p",{className:"text-white font-bold text-2xl capitalize",children:A.status}),(0,a.jsxs)("p",{className:"text-blue-100 text-sm",children:[A.enrolled,"/",A.capacity," enrolled"]})]})})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(d.Zp,{children:[(0,a.jsx)(d.aR,{children:(0,a.jsx)(d.ZB,{children:"Instructor"})}),(0,a.jsxs)(d.Wu,{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold",children:A.instructor.name.split(" ").map(e=>e[0]).join("")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-foreground",children:A.instructor.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:A.instructor.email})]})]}),A.instructor.office&&(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("p",{className:"text-muted-foreground",children:["Office: ",A.instructor.office]}),A.instructor.officeHours&&(0,a.jsxs)("p",{className:"text-muted-foreground",children:["Hours: ",A.instructor.officeHours]})]})]})]}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsx)(d.aR,{children:(0,a.jsx)(d.ZB,{children:"Schedule"})}),(0,a.jsx)(d.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Days"}),(0,a.jsx)("p",{className:"font-semibold text-foreground",children:A.schedule.days.map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(", ")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Time"}),(0,a.jsxs)("p",{className:"font-semibold text-foreground",children:[A.schedule.startTime," - ",A.schedule.endTime]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Location"}),(0,a.jsx)("p",{className:"font-semibold text-foreground",children:A.schedule.location}),(0,a.jsx)("p",{className:"text-muted-foreground",children:A.schedule.building})]})]})})]})]}),(0,a.jsx)(f.m,{courseId:h,courseName:A.name,existingStudyPlan:T}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{className:"flex flex-row items-center justify-between space-y-0 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,a.jsxs)("button",{className:"flex items-center space-x-2 text-left hover:text-foreground transition-colors",onClick:()=>P(!Z),children:[(0,a.jsx)(d.ZB,{children:"Study Plan"}),Z?(0,a.jsx)(p.A,{className:"h-5 w-5 text-muted-foreground"}):(0,a.jsx)(j.A,{className:"h-5 w-5 text-muted-foreground"})]}),T&&T.weeks&&T.weeks.length>0&&(0,a.jsxs)(o.E,{variant:"secondary",className:"text-xs",children:[T.weeks.length," weeks"]})]}),D&&(0,a.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>{F((null==T?void 0:T.weeks)||[]),W(!0)},children:"Manage Study Plan"})]}),Z&&(0,a.jsx)(d.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:q?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm mt-3",children:"Loading study plan..."})]}):T&&T.weeks&&T.weeks.length>0?(0,a.jsx)("div",{className:"space-y-3",children:T.weeks.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[(0,a.jsxs)("button",{className:"w-full flex items-center justify-between p-4 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors rounded-lg",onClick:()=>(e=>{let s=new Set(R);s.has(e)?s.delete(e):s.add(e),$(s)})(e.week),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:e.week}),(0,a.jsxs)("span",{className:"font-medium",children:["Week ",e.week]})]}),R.has(e.week)?(0,a.jsx)(p.A,{className:"h-5 w-5 text-muted-foreground"}):(0,a.jsx)(j.A,{className:"h-5 w-5 text-muted-foreground"})]}),R.has(e.week)&&(0,a.jsx)("div",{className:"px-4 pb-4 text-sm text-muted-foreground border-t border-gray-200 dark:border-gray-700 pt-3",children:(0,a.jsx)("div",{className:"prose prose-sm max-w-none",children:e.description||"No description available for this week."})})]},e.week))}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCDA"})}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:D?"No study plan created yet. Click 'Manage Study Plan' to create one.":"Study plan will be available soon"})]})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Open Quizzes"}),D&&(0,a.jsx)(g(),{href:"/courses/".concat(h,"/create-quiz"),children:(0,a.jsx)(c.$,{variant:"default",size:"sm",children:"+ Create Quiz"})})]}),(0,a.jsx)("div",{className:"space-y-4",children:A.openQuizzes.length>0?A.openQuizzes.map((e,s)=>(0,a.jsx)(y,{quiz:e,courseId:h},e.id)):(0,a.jsx)(d.Zp,{className:"p-6 text-center",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:D?"No quizzes created yet. Create your first quiz!":"No open quizzes at this time"})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Course Materials"}),D&&(0,a.jsx)(c.$,{variant:"default",size:"sm",children:"+ Add Material"})]}),(0,a.jsx)("div",{className:"space-y-4",children:A.materials.length>0?(0,a.jsxs)(a.Fragment,{children:[A.materials.slice(0,5).map(e=>(0,a.jsx)(N,{material:e},e.id)),A.materials.length>5&&(0,a.jsxs)(c.$,{variant:"outline",className:"w-full",children:["View All Materials (",A.materials.length,")"]})]}):(0,a.jsx)(d.Zp,{className:"p-6 text-center",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:D?"No materials uploaded yet. Add your first course material!":"Course materials will be available soon"})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Assignments & Deadlines"}),D&&(0,a.jsx)(g(),{href:"/courses/".concat(h,"/create-assignment"),children:(0,a.jsx)(c.$,{variant:"default",size:"sm",children:"+ Create Assignment"})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[A.upcomingDeadlines.slice(0,4).map(e=>(0,a.jsx)(b,{assignment:e},e.id)),0===A.upcomingDeadlines.length&&(0,a.jsx)(d.Zp,{className:"p-6 text-center",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:D?"No assignments created yet. Create your first assignment!":"No upcoming assignments"})}),(0,a.jsx)(g(),{href:"/assignments",children:(0,a.jsx)(c.$,{variant:"outline",className:"w-full",children:"View All Assignments"})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(d.Zp,{children:[(0,a.jsx)(d.aR,{children:(0,a.jsx)(d.ZB,{children:"Recent Grades"})}),(0,a.jsx)(d.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:A.recentGrades.length>0?(0,a.jsxs)(a.Fragment,{children:[A.recentGrades.slice(0,3).map(e=>(0,a.jsx)(v,{grade:e},e.id)),(0,a.jsx)(g(),{href:"/grades",children:(0,a.jsx)(c.$,{variant:"outline",size:"sm",className:"w-full",children:"View All Grades"})})]}):(0,a.jsx)("p",{className:"text-center text-muted-foreground py-4",children:"No grades available yet"})})})]}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsx)(d.aR,{children:(0,a.jsx)(d.ZB,{children:"Announcements"})}),(0,a.jsx)(d.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:A.announcements.length>0?(0,a.jsxs)(a.Fragment,{children:[A.announcements.slice(0,3).map(e=>(0,a.jsx)(w,{announcement:e},e.id)),A.announcements.length>3&&(0,a.jsx)(c.$,{variant:"outline",size:"sm",className:"w-full",children:"View All Announcements"})]}):(0,a.jsx)("p",{className:"text-center text-muted-foreground py-4",children:"No announcements yet"})})})]}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsx)(d.aR,{children:(0,a.jsx)(d.ZB,{children:"Quick Actions"})}),(0,a.jsxs)(d.Wu,{className:"space-y-3",children:[z&&(0,a.jsx)("div",{children:(0,a.jsx)(g(),{href:"/courses/".concat(h,"/enroll"),children:(0,a.jsx)(c.$,{variant:"default",className:"w-full",children:"\uD83D\uDC65 Enroll Students"})})}),(0,a.jsx)("div",{children:(0,a.jsx)(c.$,{variant:"default",className:"w-full",children:"\uD83D\uDCE7 Email Instructor"})}),(0,a.jsx)("div",{children:(0,a.jsx)(g(),{href:"/assignments",children:(0,a.jsx)(c.$,{variant:"outline",className:"w-full",children:"\uD83D\uDCDD Submit Assignment"})})}),(0,a.jsx)("div",{children:(0,a.jsx)(c.$,{variant:"outline",className:"w-full",children:"\uD83D\uDCCA View Syllabus"})}),(0,a.jsx)("div",{children:(0,a.jsx)(c.$,{variant:"outline",className:"w-full",children:"\uD83D\uDCAC Class Discussion"})})]})]})]})]})]})}),I&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto border shadow-xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Manage Study Plan"}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>W(!1),children:"✕"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Create and manage weekly study plan for this course."}),(0,a.jsxs)("div",{className:"space-y-3",children:[B.map((e,s)=>(0,a.jsx)(d.Zp,{className:"bg-white/50 dark:bg-gray-900/50",children:(0,a.jsx)(d.Wu,{className:"p-4",children:(0,a.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)("span",{className:"font-semibold",children:["Week ",e.week]}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>{F(B.filter((e,t)=>t!==s).map((e,s)=>({...e,week:(s+1).toString()})))},className:"text-red-500 hover:text-red-700 h-6 w-6 p-0",children:"\xd7"})]}),(0,a.jsx)("textarea",{className:"w-full p-2 border rounded-md bg-white/70 dark:bg-gray-800/70 resize-none",rows:3,placeholder:"Enter week description...",value:e.description,onChange:e=>((e,s)=>{let t=[...B];t[e].description=s,F(t)})(s,e.target.value)})]})})})},s)),(0,a.jsx)(d.Zp,{className:"bg-white/30 dark:bg-gray-900/30 border-2 border-dashed border-gray-300 dark:border-gray-600 hover:bg-white/40 dark:hover:bg-gray-900/40 transition-colors cursor-pointer",onClick:()=>{let e={week:(B.length+1).toString(),description:""};F([...B,e])},children:(0,a.jsx)(d.Wu,{className:"p-6 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-2xl text-blue-600 dark:text-blue-400",children:"+"})}),(0,a.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Add Weekly"}),(0,a.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Click to add a new week"})]})})})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,a.jsx)(c.$,{variant:"outline",onClick:()=>W(!1),disabled:L,children:"Cancel"}),(0,a.jsx)(c.$,{onClick:G,disabled:L||0===B.length,children:L?"Saving...":"Save Study Plan"})]})]})]})})]})}}},e=>{e.O(0,[874,794,352,541,828,695,441,964,358],()=>e(e.s=4145)),_N_E=e.O()}]);