(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[257],{229:(e,t,r)=>{"use strict";r.d(t,{CU:()=>c,UA:()=>o,fF:()=>d,q_:()=>l});var s=r(5155),n=r(2115),i=r(5695),a=r(1541);function l(e){let{children:t,requiredRoles:r=[],fallbackPath:l="/login",requireAuth:d=!0}=e,{user:o,isAuthenticated:c,isLoading:u}=(0,a.A)(),m=(0,i.useRouter)(),x=(0,i.usePathname)();return((0,n.useEffect)(()=>{if(!u){if(d&&!c){let e="/login"!==x?"?returnUrl=".concat(encodeURIComponent(x)):"";m.push("".concat(l).concat(e));return}if(c&&o&&r.length>0&&!r.includes(o.role)){switch(o.role){case"ADMIN":m.push("/admin-portal");break;case"SUPERVISOR_TEACHER":case"TEACHER":m.push("/teacher-portal");break;case"STUDENT":m.push("/student-portal");break;default:m.push("/")}return}}},[c,u,o,r,m,x,l,d]),u)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):d&&!c||c&&o&&r.length>0&&!r.includes(o.role)?null:(0,s.jsx)(s.Fragment,{children:t})}function d(e){let{children:t}=e;return(0,s.jsx)(l,{requiredRoles:["STUDENT"],children:t})}function o(e){let{children:t}=e;return(0,s.jsx)(l,{requiredRoles:["TEACHER","SUPERVISOR_TEACHER"],children:t})}function c(e){let{children:t}=e,{isAuthenticated:r,isLoading:l,user:d}=(0,a.A)(),o=(0,i.useRouter)();return((0,n.useEffect)(()=>{if(!l&&r&&d&&d.role){let e=setTimeout(()=>{let e="STUDENT"===d.role?"/student-portal":"TEACHER"===d.role||"SUPERVISOR_TEACHER"===d.role?"/teacher-portal":"ADMIN"===d.role?"/admin-portal":"/";window.location.href=e},500);return()=>clearTimeout(e)}},[r,l,d,o]),l)?(0,s.jsxs)("div",{className:"min-h-screen flex items-center justify-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,s.jsx)("p",{className:"ml-2 text-gray-600",children:"Loading the dashboard..."})]}):r&&d&&d.role?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading the dashboard..."})]})}):(0,s.jsx)(s.Fragment,{children:t})}},457:(e,t,r)=>{Promise.resolve().then(r.bind(r,551))},551:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(5155),n=r(2115),i=r(5695),a=r(6695),l=r(285),d=r(2523),o=r(5057),c=r(8539),u=r(8950),m=r(4774),x=r(1541),h=r(229),p=r(1121),f=r(6874),g=r.n(f),j=r(5169);function b(){let{courseId:e}=(0,i.useParams)(),{user:t}=(0,x.A)(),[r,f]=(0,n.useState)({title:"",description:"",type:"HOMEWORK",dueDate:"",maxPoints:100,isGroupWork:!1}),[b,v]=(0,n.useState)(!1),[y,N]=(0,n.useState)(null),k=async t=>{if(t.preventDefault(),!r.title.trim())return void N("Please enter an assignment title");if(!r.dueDate)return void N("Please set a due date");try{v(!0),N(null);let t=r.dueDate?new Date(r.dueDate+":00").toISOString():new Date(Date.now()+864e5).toISOString(),s={courseId:e,title:r.title,description:r.description,type:r.type,dueDate:t,maxPoints:r.maxPoints,isGroupWork:r.isGroupWork};console.log("Sending assignment data:",s);let n=await fetch("".concat("https://vitriolacademy.com:76492","/assignments"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken")),"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){let e=await n.text();throw console.error("Assignment creation error response:",e),Error("Failed to create assignment: ".concat(n.status," ").concat(n.statusText," - ").concat(e))}window.location.href="/courses/".concat(e)}catch(e){console.error("Error creating assignment:",e),N(e instanceof Error?e.message:"Failed to create assignment")}finally{v(!1)}},w=(0,s.jsx)(m.Y,{userType:"teacher"});return(0,s.jsx)(h.q_,{requiredRoles:["TEACHER","SUPERVISOR_TEACHER"],children:(0,s.jsx)(u.CF,{drawerContent:w,children:(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-100 dark:from-slate-900 dark:to-slate-800",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(g(),{href:"/courses/".concat(e),children:(0,s.jsxs)(l.$,{variant:"outline",size:"sm",children:[(0,s.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"Back to Course"]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Create Assignment"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Create a new assignment for your course"})]})]})}),(0,s.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[(0,s.jsxs)(a.Zp,{children:[(0,s.jsx)(a.aR,{children:(0,s.jsx)(a.ZB,{children:"Assignment Details"})}),(0,s.jsxs)(a.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(o.J,{htmlFor:"title",children:"Assignment Title *"}),(0,s.jsx)(d.p,{id:"title",value:r.title,onChange:e=>f(t=>({...t,title:e.target.value})),placeholder:"Enter assignment title",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(o.J,{htmlFor:"type",children:"Assignment Type"}),(0,s.jsxs)("select",{id:"type",value:r.type,onChange:e=>f(t=>({...t,type:e.target.value})),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[(0,s.jsx)("option",{value:"HOMEWORK",children:"Homework"}),(0,s.jsx)("option",{value:"PROJECT",children:"Project"}),(0,s.jsx)("option",{value:"LAB",children:"Lab"}),(0,s.jsx)("option",{value:"EXAM",children:"Exam"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(o.J,{htmlFor:"dueDate",children:"Due Date *"}),(0,s.jsx)(d.p,{id:"dueDate",type:"datetime-local",value:r.dueDate,onChange:e=>f(t=>({...t,dueDate:e.target.value})),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(o.J,{htmlFor:"maxPoints",children:"Maximum Points"}),(0,s.jsx)(d.p,{id:"maxPoints",type:"number",value:r.maxPoints,onChange:e=>f(t=>({...t,maxPoints:parseInt(e.target.value)||100})),min:"1",max:"1000"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(o.J,{htmlFor:"description",children:"Description"}),(0,s.jsx)(c.T,{id:"description",value:r.description,onChange:e=>f(t=>({...t,description:e.target.value})),placeholder:"Enter assignment description",rows:3})]})]})]}),(0,s.jsxs)(a.Zp,{children:[(0,s.jsx)(a.aR,{children:(0,s.jsx)(a.ZB,{children:"Assignment Settings"})}),(0,s.jsx)(a.Wu,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(p.S,{id:"isGroupWork",checked:r.isGroupWork,onCheckedChange:e=>f(t=>({...t,isGroupWork:e}))}),(0,s.jsx)(o.J,{htmlFor:"isGroupWork",children:"Group Assignment"})]})})]}),(0,s.jsxs)(a.Zp,{children:[(0,s.jsx)(a.aR,{children:(0,s.jsx)(a.ZB,{children:"Summary"})}),(0,s.jsxs)(a.Wu,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Type:"}),(0,s.jsx)("p",{className:"font-semibold capitalize",children:r.type.toLowerCase()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Points:"}),(0,s.jsx)("p",{className:"font-semibold",children:r.maxPoints})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Due Date:"}),(0,s.jsx)("p",{className:"font-semibold",children:r.dueDate?new Date(r.dueDate).toLocaleDateString():"Not set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Group Work:"}),(0,s.jsx)("p",{className:"font-semibold",children:r.isGroupWork?"Yes":"No"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm mt-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),(0,s.jsx)("p",{className:"font-semibold text-green-600",children:"Ready to Create"})]})})]})]}),y&&(0,s.jsx)(a.Zp,{className:"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/20",children:(0,s.jsx)(a.Wu,{className:"pt-6",children:(0,s.jsx)("p",{className:"text-red-600 dark:text-red-400",children:y})})}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,s.jsx)(g(),{href:"/courses/".concat(e),children:(0,s.jsx)(l.$,{type:"button",variant:"outline",children:"Cancel"})}),(0,s.jsx)(l.$,{type:"submit",disabled:b,children:b?"Creating Assignment...":"Create Assignment"})]})]})]})})})})}},1121:(e,t,r)=>{"use strict";r.d(t,{S:()=>D});var s=r(5155),n=r(2115),i=r(6101),a=r(6081),l=r(5185),d=r(5845),o=r(5503),c=r(1275),u=r(8905),m=r(3655),x="Checkbox",[h,p]=(0,a.A)(x),[f,g]=h(x);function j(e){let{__scopeCheckbox:t,checked:r,children:i,defaultChecked:a,disabled:l,form:o,name:c,onCheckedChange:u,required:m,value:h="on",internal_do_not_use_render:p}=e,[g,j]=(0,d.i)({prop:r,defaultProp:null!=a&&a,onChange:u,caller:x}),[b,v]=n.useState(null),[y,N]=n.useState(null),k=n.useRef(!1),w=!b||!!o||!!b.closest("form"),E={checked:g,disabled:l,setChecked:j,control:b,setControl:v,name:c,form:o,value:h,hasConsumerStoppedPropagationRef:k,required:m,defaultChecked:!C(a)&&a,isFormControl:w,bubbleInput:y,setBubbleInput:N};return(0,s.jsx)(f,{scope:t,...E,children:"function"==typeof p?p(E):i})}var b="CheckboxTrigger",v=n.forwardRef((e,t)=>{let{__scopeCheckbox:r,onKeyDown:a,onClick:d,...o}=e,{control:c,value:u,disabled:x,checked:h,required:p,setControl:f,setChecked:j,hasConsumerStoppedPropagationRef:v,isFormControl:y,bubbleInput:N}=g(b,r),k=(0,i.s)(t,f),w=n.useRef(h);return n.useEffect(()=>{let e=null==c?void 0:c.form;if(e){let t=()=>j(w.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[c,j]),(0,s.jsx)(m.sG.button,{type:"button",role:"checkbox","aria-checked":C(h)?"mixed":h,"aria-required":p,"data-state":R(h),"data-disabled":x?"":void 0,disabled:x,value:u,...o,ref:k,onKeyDown:(0,l.m)(a,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,l.m)(d,e=>{j(e=>!!C(e)||!e),N&&y&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())})})});v.displayName=b;var y=n.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:n,checked:i,defaultChecked:a,required:l,disabled:d,value:o,onCheckedChange:c,form:u,...m}=e;return(0,s.jsx)(j,{__scopeCheckbox:r,checked:i,defaultChecked:a,disabled:d,required:l,onCheckedChange:c,name:n,form:u,value:o,internal_do_not_use_render:e=>{let{isFormControl:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v,{...m,ref:t,__scopeCheckbox:r}),n&&(0,s.jsx)(E,{__scopeCheckbox:r})]})}})});y.displayName=x;var N="CheckboxIndicator",k=n.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:n,...i}=e,a=g(N,r);return(0,s.jsx)(u.C,{present:n||C(a.checked)||!0===a.checked,children:(0,s.jsx)(m.sG.span,{"data-state":R(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});k.displayName=N;var w="CheckboxBubbleInput",E=n.forwardRef((e,t)=>{let{__scopeCheckbox:r,...a}=e,{control:l,hasConsumerStoppedPropagationRef:d,checked:u,defaultChecked:x,required:h,disabled:p,name:f,value:j,form:b,bubbleInput:v,setBubbleInput:y}=g(w,r),N=(0,i.s)(t,y),k=(0,o.Z)(u),E=(0,c.X)(l);n.useEffect(()=>{if(!v)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!d.current;if(k!==u&&e){let r=new Event("click",{bubbles:t});v.indeterminate=C(u),e.call(v,!C(u)&&u),v.dispatchEvent(r)}},[v,k,u,d]);let R=n.useRef(!C(u)&&u);return(0,s.jsx)(m.sG.input,{type:"checkbox","aria-hidden":!0,defaultChecked:null!=x?x:R.current,required:h,disabled:p,name:f,value:j,form:b,...a,tabIndex:-1,ref:N,style:{...a.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function C(e){return"indeterminate"===e}function R(e){return C(e)?"indeterminate":e?"checked":"unchecked"}E.displayName=w;let S=(0,r(9946).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var A=r(9434);let D=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(y,{ref:t,className:(0,A.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...n,children:(0,s.jsx)(k,{className:(0,A.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(S,{className:"h-4 w-4"})})})});D.displayName=y.displayName},2523:(e,t,r)=>{"use strict";r.d(t,{p:()=>a});var s=r(5155),n=r(2115),i=r(9434);let a=n.forwardRef((e,t)=>{let{className:r,type:n,...a}=e;return(0,s.jsx)("input",{type:n,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});a.displayName="Input"},5057:(e,t,r)=>{"use strict";r.d(t,{J:()=>o});var s=r(5155),n=r(2115),i=r(968),a=r(2085),l=r(9434);let d=(0,a.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(i.b,{ref:t,className:(0,l.cn)(d(),r),...n})});o.displayName=i.b.displayName},5169:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8539:(e,t,r)=>{"use strict";r.d(t,{T:()=>a});var s=r(5155),n=r(2115),i=r(9434);let a=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...n})});a.displayName="Textarea"}},e=>{e.O(0,[874,794,352,423,541,828,441,964,358],()=>e(e.s=457)),_N_E=e.O()}]);