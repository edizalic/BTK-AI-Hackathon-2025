(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[163],{229:(e,s,r)=>{"use strict";r.d(s,{CU:()=>o,UA:()=>i,fF:()=>c,q_:()=>d});var t=r(5155),a=r(2115),l=r(5695),n=r(1541);function d(e){let{children:s,requiredRoles:r=[],fallbackPath:d="/login",requireAuth:c=!0}=e,{user:i,isAuthenticated:o,isLoading:x}=(0,n.A)(),m=(0,l.useRouter)(),u=(0,l.usePathname)();return((0,a.useEffect)(()=>{if(!x){if(c&&!o){let e="/login"!==u?"?returnUrl=".concat(encodeURIComponent(u)):"";m.push("".concat(d).concat(e));return}if(o&&i&&r.length>0&&!r.includes(i.role)){switch(i.role){case"ADMIN":m.push("/admin-portal");break;case"SUPERVISOR_TEACHER":case"TEACHER":m.push("/teacher-portal");break;case"STUDENT":m.push("/student-portal");break;default:m.push("/")}return}}},[o,x,i,r,m,u,d,c]),x)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):c&&!o||o&&i&&r.length>0&&!r.includes(i.role)?null:(0,t.jsx)(t.Fragment,{children:s})}function c(e){let{children:s}=e;return(0,t.jsx)(d,{requiredRoles:["STUDENT"],children:s})}function i(e){let{children:s}=e;return(0,t.jsx)(d,{requiredRoles:["TEACHER","SUPERVISOR_TEACHER"],children:s})}function o(e){let{children:s}=e,{isAuthenticated:r,isLoading:d,user:c}=(0,n.A)(),i=(0,l.useRouter)();return((0,a.useEffect)(()=>{if(!d&&r&&c&&c.role){let e=setTimeout(()=>{let e="STUDENT"===c.role?"/student-portal":"TEACHER"===c.role||"SUPERVISOR_TEACHER"===c.role?"/teacher-portal":"ADMIN"===c.role?"/admin-portal":"/";window.location.href=e},500);return()=>clearTimeout(e)}},[r,d,c,i]),d)?(0,t.jsxs)("div",{className:"min-h-screen flex items-center justify-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,t.jsx)("p",{className:"ml-2 text-gray-600",children:"Loading the dashboard..."})]}):r&&c&&c.role?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading the dashboard..."})]})}):(0,t.jsx)(t.Fragment,{children:s})}},1739:(e,s,r)=>{Promise.resolve().then(r.bind(r,9353))},9353:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>x});var t=r(5155),a=r(2115),l=r(285),n=r(6695),d=r(8950),c=r(4774),i=r(1541),o=r(229);function x(){let{user:e}=(0,i.A)(),[s,r]=(0,a.useState)(null),[x,m]=(0,a.useState)(!0),[u,h]=(0,a.useState)(null),g=(null==e?void 0:e.role)==="STUDENT"?"student":"teacher",b={name:(null==e?void 0:e.profile)?"".concat(e.profile.firstName," ").concat(e.profile.lastName):"Loading...",email:(null==e?void 0:e.email)||""};(0,a.useEffect)(()=>{(async()=>{if(null==e?void 0:e.id)try{m(!0),h(null);let s=await fetch("".concat("https://vitriolacademy.com:76492","/grades/student/").concat(e.id),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken")),"Content-Type":"application/json"}});if(!s.ok)throw Error("Failed to fetch grades: ".concat(s.status));let t=await s.json();console.log("\uD83D\uDCE5 Raw Grades API Response:",t),r(t)}catch(e){console.error("❌ Error fetching grades:",e),h(e instanceof Error?e.message:"Failed to fetch grades")}finally{m(!1)}})()},[null==e?void 0:e.id]);let j=(0,t.jsx)(c.Y,{userType:g,userData:b}),p=Object.values(((null==s?void 0:s.grades)||[]).reduce((e,s)=>{let r=s.courseName||"Unknown Course";return e[r]||(e[r]={name:s.courseName||"Unknown Course",code:s.courseCode||"N/A",grades:[]}),e[r].grades.push(s),e},{})).map((e,s)=>({id:s+1,name:e.name,code:e.code,teacher:"Instructor",currentGrade:e.grades.length>0?e.grades[e.grades.length-1].letterGrade:"N/A",gpa:3.5,credits:3,grades:e.grades.map(e=>({assignment:e.assignmentTitle,score:e.score,maxScore:e.maxPoints,date:e.gradedDate,type:e.assignmentType||"assignment"}))})),N=(null==s?void 0:s.overallGPA)||3.5,f=(null==s?void 0:s.totalCredits)||3*p.length;return x?(0,t.jsx)(o.q_,{requiredRoles:["STUDENT","TEACHER","SUPERVISOR_TEACHER"],children:(0,t.jsx)(d.CF,{drawerContent:j,children:(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading grades..."})]})})})}):u?(0,t.jsx)(o.q_,{requiredRoles:["STUDENT","TEACHER","SUPERVISOR_TEACHER"],children:(0,t.jsx)(d.CF,{drawerContent:j,children:(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center",children:(0,t.jsx)(n.Zp,{className:"max-w-md",children:(0,t.jsx)(n.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-red-500 text-4xl mb-4",children:"⚠️"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Grades"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:u}),(0,t.jsx)(l.$,{onClick:()=>window.location.reload(),children:"Retry"})]})})})})})}):(0,t.jsx)(o.q_,{requiredRoles:["STUDENT","TEACHER","SUPERVISOR_TEACHER"],children:(0,t.jsx)(d.CF,{drawerContent:j,children:(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-100 dark:from-slate-900 dark:to-slate-800",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:["\uD83D\uDCCA ","student"===g?"Grades & Performance":"Class Grades Overview"]}),(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-300",children:"student"===g?"Track your academic progress and performance":"Monitor student grades and class performance"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,t.jsxs)(n.Zp,{className:"md:col-span-2 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20 border-blue-200 dark:border-blue-800",children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)(n.ZB,{className:"flex items-center space-x-2 text-blue-700 dark:text-blue-300",children:[(0,t.jsx)("span",{children:"\uD83C\uDFAF"}),(0,t.jsx)("span",{children:"Overall Performance"})]})}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:N}),(0,t.jsx)("div",{className:"text-sm text-blue-600/80 dark:text-blue-400/80",children:"Cumulative GPA"}),(0,t.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[f," credit hours completed"]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-2xl font-semibold text-blue-600 dark:text-blue-400",children:"Top 15%"}),(0,t.jsx)("div",{className:"text-xs text-blue-600/80 dark:text-blue-400/80",children:"Class Ranking"}),(0,t.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Dean's List"})]})]})})]}),(0,t.jsx)(n.Zp,{className:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800",children:(0,t.jsxs)(n.Wu,{className:"p-6 text-center",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:p.filter(e=>e.currentGrade.startsWith("A")).length}),(0,t.jsx)("div",{className:"text-sm text-green-600/80 dark:text-green-400/80",children:"A Grades"}),(0,t.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Excellent work"})]})}),(0,t.jsx)(n.Zp,{className:"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800",children:(0,t.jsxs)(n.Wu,{className:"p-6 text-center",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:p.length}),(0,t.jsx)("div",{className:"text-sm text-purple-600/80 dark:text-purple-400/80",children:"Courses"}),(0,t.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"This semester"})]})})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:p.map(e=>(0,t.jsxs)(n.Zp,{className:"h-fit",children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.ZB,{className:"text-lg",children:e.name}),(0,t.jsxs)(n.BT,{className:"flex items-center space-x-2 mt-1",children:[(0,t.jsx)("span",{children:e.code}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:e.teacher}),(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{children:[e.credits," credits"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"px-3 py-1 text-sm font-semibold rounded-lg ".concat((e=>{switch(e){case"A":case"A+":return"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300";case"A-":return"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400";case"B+":return"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400";case"B":return"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300";case"B-":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400";case"C+":case"C":return"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400";default:return"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}})(e.currentGrade)),children:e.currentGrade}),(0,t.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[e.gpa," GPA"]})]})]})}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Recent Assignments"}),e.grades.slice(-3).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 flex-1",children:[(0,t.jsx)("span",{className:"text-sm",children:(e=>{switch(e){case"homework":return"\uD83D\uDCDD";case"quiz":return"❓";case"exam":return"\uD83D\uDCCB";case"lab":return"\uD83D\uDD2C";case"essay":return"✍️";case"project":return"\uD83D\uDCCA";case"presentation":return"\uD83C\uDFA4";case"participation":return"\uD83D\uDCAC";default:return"\uD83D\uDCC4"}})(e.type)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100 truncate",children:e.assignment}),(0,t.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.date})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:[e.score,"/",e.maxScore]}),(0,t.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[Math.round(e.score/e.maxScore*100),"%"]})]})]},s)),(0,t.jsxs)(l.$,{variant:"outline",size:"sm",className:"w-full mt-3",children:["View All ",e.grades.length," Assignments"]})]})})]},e.id))}),(0,t.jsxs)(n.Zp,{className:"mt-8",children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsxs)(n.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{children:"\uD83D\uDCC8"}),(0,t.jsx)("span",{children:"Grade Trends & Insights"})]}),(0,t.jsx)(n.BT,{children:"Your academic performance analysis and recommendations"})]}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsx)("span",{className:"text-green-600 dark:text-green-400",children:"\uD83D\uDCCA"}),(0,t.jsx)("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Strong Performance"})]}),(0,t.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400",children:"You're excelling in English Literature with consistent A grades. Keep up the excellent work!"})]}),(0,t.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsx)("span",{className:"text-yellow-600 dark:text-yellow-400",children:"\uD83D\uDCA1"}),(0,t.jsx)("span",{className:"font-medium text-yellow-700 dark:text-yellow-300",children:"Improvement Area"})]}),(0,t.jsx)("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Consider spending more time on World History assignments to boost your grade from B to B+."})]}),(0,t.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsx)("span",{className:"text-blue-600 dark:text-blue-400",children:"\uD83C\uDFAF"}),(0,t.jsx)("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Goal Progress"})]}),(0,t.jsx)("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"You're on track to achieve a 3.8+ GPA this semester. Maintain current performance!"})]})]})})]})]})})})})}}},e=>{e.O(0,[874,794,352,541,828,441,964,358],()=>e(e.s=1739)),_N_E=e.O()}]);